<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Tri par s√©lection</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background: #f5f6fa;
        margin: 0;
        padding: 20px;
    }

    h1 {
        font-size: 40px;
        margin-bottom: 20px;
    }

    .container {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* Tableau */
    .array-container {
        display: flex;
        justify-content: center;
        gap: 8px;
        flex-wrap: wrap;
        margin-bottom: 25px;
    }

    .array-item {
        padding: 6px 10px;
        font-size: 18px;
        text-align: center;
        min-width: 40px;
        border: 1px solid #ccc;
        border-radius: 6px;
        transition: 0.3s;
    }

    .swap-highlight {
        background: #f57c00;
        color: white;
        border-color: #e66a00;
    }

    .min-highlight {
        background: #1565c0 !important;
        color: white;
    }

    /* Boutons */
    button {
        padding: 10px 18px;
        margin: 5px;
        border-radius: 8px;
        border: none;
        font-size: 18px;
        cursor: pointer;
    }

    #loadBtn { background: #2e7d32; color: white; }
    #autoBtn { background: #1565c0; color: white; }
    #stepBtn { background: #f9a825; }
    #stopBtn { background: #c62828; color: white; }

    /* Graphique */
    .bar {
        width: 55px;
        background: #2ecc71;
        border-radius: 6px;
        margin: 0 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding-bottom: 6px;
        color: white;
        font-size: 20px;
        font-weight: bold;
        transition: all 0.4s ease;
    }

    .bar.swap {
        background: #e91e63 !important;
    }

    .bar.min {
        background: #1565c0 !important;
    }

    .graph-container {
        display: flex;
        justify-content: center;
        align-items: flex-end;
        height: 350px;
    }

</style>
</head>

<body>
    <div class="text-center mt-4 mb-4">
        <a href="index.html" 
           class="btn btn-light btn-lg shadow"
           style="
                padding: 18px 40px;
                font-size: 26px;
                border-radius: 18px;
                font-weight: 600;
                color: #2c3e50;
           ">
            üè† ‚¨Ö Retour √† la page principale
        </a>
    </div>
    
    <h1>Lyc√©e Libert√© Jendouba</h1>
    <h2>Club Programmation et Intelligence Artificielle</h2>
<h1>Tri par S√©lection</h1>

<div class="container">

    <!-- Tableau -->
    <div id="array" class="array-container"></div>

    <!-- Commandes -->
    <div>
        <button id="loadBtn">Charger</button>
        <button id="autoBtn">D√©marrer Auto</button>
        <button id="stepBtn">Pas √† pas</button>
        <button id="stopBtn">Arr√™ter</button>
    </div>

    <br>

    <!-- Graphique -->
    <div id="graph" class="graph-container"></div>

</div>
</div>
<div><h2>Enseignant : MEZNI Kamel</h2>
<h3>Email : teacher.4630@tarbia.tn</h3>
</div>
<script>
/* -----------------------------
   Variables du tri par s√©lection
------------------------------*/
let values = [];
let i = 0, j = 0;
let minIndex = 0;
let interval = null;

/* -----------------------------
   G√©n√©ration al√©atoire
------------------------------*/
function generateRandomArray() {
    let arr = [];
    for (let k = 0; k < 10; k++) {
        arr.push(Math.floor(Math.random() * 20) + 1);
    }
    return arr;
}

/* -----------------------------
   Affichage du tableau
------------------------------*/
function renderArray() {
    const arrayDiv = document.getElementById("array");
    arrayDiv.innerHTML = "";

    values.forEach((v, idx) => {
        let item = document.createElement("div");
        item.className = "array-item";
        item.textContent = v;
        item.dataset.index = idx;
        arrayDiv.appendChild(item);
    });
}

/* -----------------------------
   Affichage graphique
------------------------------*/
function renderBars(highlightA = -1, highlightB = -1, min = -1) {
    const graph = document.getElementById("graph");
    graph.innerHTML = "";

    values.forEach((value, index) => {
        let bar = document.createElement("div");
        bar.className = "bar";
        bar.style.height = value * 12 + "px";
        bar.textContent = value;

        if (index === min) bar.classList.add("min");
        if (index === highlightA || index === highlightB) bar.classList.add("swap");

        graph.appendChild(bar);
    });
}

/* -----------------------------
   Surbrillance √©change
------------------------------*/
function highlightSwap(a, b, min) {
    document.querySelectorAll(".array-item").forEach(el =>
        el.classList.remove("swap-highlight", "min-highlight")
    );

    document.querySelector(`[data-index='${min}']`).classList.add("min-highlight");
    document.querySelector(`[data-index='${a}']`).classList.add("swap-highlight");
    document.querySelector(`[data-index='${b}']`).classList.add("swap-highlight");

    renderBars(a, b, min);
}

/* -----------------------------
   Animation d‚Äô√©change
------------------------------*/
function animateSwap(a, b) {
    return new Promise(res => {
        highlightSwap(a, b, minIndex);

        setTimeout(() => {
            [values[a], values[b]] = [values[b], values[a]];
            renderArray();
            renderBars();
            res();
        }, 600);
    });
}

/* -----------------------------
   √âtape du tri par s√©lection
------------------------------*/
async function selectionStep() {
    if (i >= values.length - 1) return true;

    if (j === i) minIndex = i;

    // Trouver minimum
    if (values[j] < values[minIndex]) {
        minIndex = j;
        renderBars(i, j, minIndex);
        renderArray();
        document.querySelector(`[data-index='${minIndex}']`).classList.add("min-highlight");
    }

    j++;

    // Fin de recherche du minimum pour i
    if (j >= values.length) {

        if (minIndex !== i) {
            await animateSwap(i, minIndex);
        }

        i++;
        j = i;
    }

    return false;
}

/* -----------------------------
   Auto
------------------------------*/
function startAuto() {
    if (interval) return;

    interval = setInterval(async () => {
        let done = await selectionStep();
        if (done) stop();
    }, 700);
}

function stop() {
    clearInterval(interval);
    interval = null;
}

/* -----------------------------
   Boutons
------------------------------*/
document.getElementById("loadBtn").onclick = () => {
    stop();
    i = 0; 
    j = 0;
    minIndex = 0;

    values = generateRandomArray();

    renderArray();
    renderBars();
};

document.getElementById("autoBtn").onclick = startAuto;
document.getElementById("stopBtn").onclick = stop;

document.getElementById("stepBtn").onclick = async () => {
    stop();
    await selectionStep();
};

/* Init */
values = generateRandomArray();
renderArray();
renderBars();
</script>

</body>
</html>
